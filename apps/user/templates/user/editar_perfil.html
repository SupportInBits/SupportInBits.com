{% extends "base.html" %}
{% block title %} 
Editar perfil | Support In Bits 
{% endblock %}

{% block content %}
<div class="container">
    <h1>Editar perfil</h1>
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}

        <!-- Nombre de usuario -->
        <div class="mb-3">
            <label for="{{ form.username.id_for_label }}" class="form-label">{{ form.username.label }}</label>
            {{ form.username }}
            {% if form.username.help_text %}
                <div >{{ form.username.help_text }}</div>
            {% endif %}
            {% for error in form.username.errors %}
                <div class="text-danger small">{{ error }}</div>
            {% endfor %}
        </div>

        <!-- Email -->
        <div class="mb-3">
            <label for="{{ form.email.id_for_label }}" class="form-label">{{ form.email.label }}</label>
            {{ form.email }}
            {% if form.email.help_text %}
                <div >{{ form.email.help_text }}</div>
            {% endif %}
            {% for error in form.email.errors %}
                <div class="text-danger small">{{ error }}</div>
            {% endfor %}
        </div>

        <!-- Nombre -->
        <div class="mb-3">
            <label for="{{ form.first_name.id_for_label }}" class="form-label">{{ form.first_name.label }}</label>
            {{ form.first_name }}
            {% if form.first_name.help_text %}
                <div class="form-text">{{ form.first_name.help_text }}</div>
            {% endif %}
            {% for error in form.first_name.errors %}
                <div class="text-danger small">{{ error }}</div>
            {% endfor %}
        </div>

        <!-- Apellidos -->
        <div class="mb-3">
            <label for="{{ form.last_name.id_for_label }}" class="form-label">{{ form.last_name.label }}</label>
            {{ form.last_name }}
            {% if form.last_name.help_text %}
                <div class="form-text">{{ form.last_name.help_text }}</div>
            {% endif %}
            {% for error in form.last_name.errors %}
                <div class="text-danger small">{{ error }}</div>
            {% endfor %}
        </div>

        <!-- BiografÃ­a -->
        <div class="mb-3">
            <label for="{{ form.biografia.id_for_label }}" class="form-label">{{ form.biografia.label }}</label>
            {{ form.biografia }}
            {% if form.biografia.help_text %}
                <div class="form-text">{{ form.biografia.help_text }}</div>
            {% endif %}
            {% for error in form.biografia.errors %}
                <div class="text-danger small">{{ error }}</div>
            {% endfor %}
        </div>

        <!-- Sitio web -->
        <div class="mb-3">
            <label for="{{ form.sitio_web.id_for_label }}" class="form-label">{{ form.sitio_web.label }}</label>
            {{ form.sitio_web }}
            {% if form.sitio_web.help_text %}
                <div class="form-text">{{ form.sitio_web.help_text }}</div>
            {% endif %}
            {% for error in form.sitio_web.errors %}
                <div class="text-danger small">{{ error }}</div>
            {% endfor %}
        </div>

        <!-- Avatar -->
        <div class="mb-3">
            <label for="{{ form.avatar.id_for_label }}" class="form-label">{{ form.avatar.label }}</label>
            {% if form.instance.avatar %}
                <div class="mb-2">
                    <img src="{{ form.instance.avatar.url }}" alt="Avatar actual" style="max-width: 120px; max-height: 120px;">
                </div>
            {% endif %}
            {{ form.avatar }}
            {% if form.avatar.help_text %}
                <div class="form-text">{{ form.avatar.help_text }}</div>
            {% endif %}
            {% for error in form.avatar.errors %}
                <div class="text-danger small">{{ error }}</div>
            {% endfor %}
        </div>

        <button type="submit" class="btn btn-success">Guardar cambios</button>
        <a href="{% url 'perfil_registrado' %}" class="btn btn-secondary">Cancelar</a>
        <a href="{% url 'eliminar_perfil' %}" class="btn btn-outline-danger bg-danger text-white">Eliminar perfil</a>
    </form>
</div>
{% endblock %}